<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:batch="http://www.springframework.org/schema/batch"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans	http://www.springframework.org/schema/beans/spring-beans.xsd
	    http://www.springframework.org/schema/batch 	http://www.springframework.org/schema/batch/spring-batch.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">


	<bean id="orderProcessBean" class="com.isec.sc.intgr.scheduler.OrderProcessTask"/>
	<bean id="productSyncBean" class="com.isec.sc.intgr.scheduler.ProductSyncTask"/>
	
	<!-- ========== Job Detail ========== -->
    
    <!-- OUTRO - Order -->
    <bean id="orderCreateJob_OUTRO" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="targetObject"><ref bean="orderProcessBean"/></property>
	    <property name="targetMethod"><value>createOrder</value></property>
	    <property name="arguments">
	    	<list>
	    		<value>${key.ma.outro.order}</value>
	    		<value>${key.ma.outro.orderUpdate.S2M}</value>
	    		<value>${key.ma.outro.order.error}</value>
	    	</list>
	    </property>
	</bean>
	<bean id="orderUpdateJob_OUTRO" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="targetObject"><ref bean="orderProcessBean"/></property>
	    <property name="targetMethod"><value>updateOrderStatus</value></property>
	    <property name="arguments">
	    	<list>
	    		<value>${key.ma.outro.orderUpdate.M2S}</value>
	    		<value>${key.ma.outro.orderUpdate.S2M}</value>
	    		<value>${key.ma.outro.order.error}</value>
	    	</list>
	    </property>
	</bean>
	
	<!-- OUTRO - Product -->
	<bean id="syncProductJob_OUTRO" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="targetObject"><ref bean="productSyncBean"/></property>
	    <property name="targetMethod"><value>syncProduct</value></property>
	    <property name="arguments">
	    	<list>
	    		<value>${key.ma.outro.product}</value>
	    		<value>${key.ma.outro.product.error}</value>
	    	</list>
	    </property>
	</bean>
	
	<!-- JNS - Order -->
	<bean id="orderCreateJob_JNS" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="targetObject"><ref bean="orderProcessBean"/></property>
	    <property name="targetMethod"><value>createOrder</value></property>
	    <property name="arguments">
	    	<list>
	    		<value>${key.ma.jns.order}</value>
	    		<value>${key.ma.jns.orderUpdate.S2M}</value>
	    		<value>${key.ma.jns.order.error}</value>
	    	</list>
	    </property>
	</bean>
	<bean id="orderUpdateJob_JNS" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="targetObject"><ref bean="orderProcessBean"/></property>
	    <property name="targetMethod"><value>updateOrderStatus</value></property>
	    <property name="arguments">
	    	<list>
	    		<value>${key.ma.jns.orderUpdate.M2S}</value>
	    		<value>${key.ma.jns.orderUpdate.S2M}</value>
	    		<value>${key.ma.jns.order.error}</value>
	    	</list>
	    </property>
	</bean>
	<!-- ========== Job Detail ========== -->
	
	
	
	<!-- ========== Job Trigger Setting ========== -->
	<!-- OUTRO > Order -->
	<bean id="orderCreateJobTrigger_OUTRO" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="orderCreateJob_OUTRO" />
        <property name="cronExpression" value="0/120 * * * * ?" />
    </bean>
    <bean id="orderUpdateJobTrigger_OUTRO" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="orderUpdateJob_OUTRO" />
        <property name="cronExpression" value="0/120 * * * * ?" />
    </bean>
    <bean id="productSyncJobTrigger_OUTRO" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="syncProductJob_OUTRO" />
        <property name="cronExpression" value="0/120 * * * * ?" />
    </bean>
    
    
    <!-- JNS > Order -->
    <bean id="orderCreateJobTrigger_JNS" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="orderCreateJob_JNS" />
        <property name="startDelay" value="10000" />
        <property name="cronExpression" value="0/60 * * * * ?" />
    </bean>
    <bean id="orderUpdateJobTrigger_JNS" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="orderUpdateJob_JNS" />
        <property name="startDelay" value="10000" />
        <property name="cronExpression" value="0/60 * * * * ?" />
    </bean>
	<!-- ========== Job Trigger Setting ========== -->
	
	
	<!-- ========== Scheduler Setting ========== -->
    <bean id="schedulerFactoryBean" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
            <list>
                <ref bean="orderCreateJobTrigger_OUTRO"/>
                <ref bean="orderUpdateJobTrigger_OUTRO"/>
                <ref bean="productSyncJobTrigger_OUTRO"/>
                
                
                <!-- <ref bean="orderCreateJobTrigger_JNS"/>
                <ref bean="orderUpdateJobTrigger_JNS"/> -->
            </list>
        </property>
    </bean>
	<!-- ========== Scheduler Setting ========== -->
	
</beans>
